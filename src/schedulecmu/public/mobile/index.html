<!DOCTYPE html> 
<html>
<head>
	<meta charset="utf-8">
	<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0'/>
	<meta name="viewport" content="width=device-width" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="description" content="A brand new way to schedule classes at CMU, wherever you are." />
	<title>ScheduleCMU</title> 
	<link rel="stylesheet" href="themes/jquery.mobile-1.2.0.min.css"/>
	<link rel="stylesheet" href="themes/scheduleCMU.min.css" />
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile.structure-1.2.0.min.css" />
	<link rel="stylesheet" href="../desktop/css/fullcalendar.css" />
	<link rel="stylesheet" href="style.css" />
	<link rel="apple-touch-icon" href="../images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="../images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="../images/apple-touch-icon-114x114.png">
	<link rel="icon" href="../images/favicon.png" type="image/x-icon"> 
	<link rel="shortcut icon" href="../images/favicon.png" type="image/x-icon">
</head> 
<body> 
<!-- Facebook Auth Stuff -->
<div id="fb-root"></div>
<script>
	window.fbAsyncInit = function() {
	    FB.init({
	        appId      : '102585986572914', // App ID
	        channelUrl : '../desktop/channel.html', // Channel File
	        status     : true, // check login status
	        cookie     : true, // enable cookies to allow the server to access the session
	        xfbml      : true  // parse XFBML
	    });

	    FB.getLoginStatus(function(response) {
			if (response.status === 'connected') {
	        	/* Connected! */
	        	loginToScheduleCMU(response.authResponse);
	      	}
	      	else {
	        	/* Not yet authorized */
	        	loginToFB();
	      	}
	    });
	};

	// Load the SDK Asynchronously
	(function(d){
	    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
	    if (d.getElementById(id)) {return;}
	    js = d.createElement('script'); js.id = id; js.async = true;
	    js.src = "http://connect.facebook.net/en_US/all.js";
	    ref.parentNode.insertBefore(js, ref);
	}(document));
</script>

<!-- Login Page -->
<div data-role="page" data-title="Login" id="login" data-theme="a" class="red">
	<div data-role="content">
		<div id="loginGrid" class="ui-grid-b">
			<div class="ui-block-a"></div>
			<div class="ui-block-b">
				<img src="../images/icon_extract.png" alt="ScheduleCMU" />
				<a href="#gridview" onclick="loginToFB();" data-role="button" data-transition="slide" data-icon-theme="a" data-icon="arrow-r" data-iconpos="right">Login with Facebook</a>	
			</div>
		</div>
	</div>
</div>

<!-- Course List Page -->
<div data-role="page" data-title="ScheduleCMU" id="listview">
	<!--HEADER-->
	<div data-role="header" data-position="fixed">
	  <div class="ui-btn-left" class="viewswitch" data-role="controlgroup" data-type="horizontal">
	    <a href="#listview" data-transition="flip" data-role="button" data-icon-theme="a" data-iconpos="notext" data-icon="minus">left 1</a>
	    <a href="#gridview" data-transition="flip" data-role="button" data-icon-theme="a" data-iconpos="notext" data-icon="grid">left 2</a>
	  </div>
	  <img class="makeitsmall" src="../images/icon_extract.png" alt="ScheduleCMU" />
	  <div class="ui-btn-right" data-role="controlgroup" data-type="horizontal">
	    <a href="#browsePop" data-transition="pop" data-rel="dialog" data-role="button" data-icon-theme="a" data-iconpos="notext" data-icon="myapp-browse">right 1</a>
	    <a href="#eventPop" data-transition="pop" data-role="button" data-icon-theme="a" data-iconpos="notext" data-rel="dialog" data-icon="myapp-cal">right 2</a>
	  </div>
	</div>

	<div data-role="content">
		<input type="text" name="addCourse" id="addCourseBox" placeholder="Add New Course" />
		<div id="accordion" data-role="collapsible-set">
			<!-- To be populated with course info -->
		</div>
	</div>
</div>

<!-- Calendar Grid Page -->
<div data-role="page" data-title="ScheduleCMU" id="gridview">
	<div data-role="header" id="gridviewheader" data-position="fixed">
	  <div class="ui-btn-left" class="viewswitch" data-role="controlgroup" data-type="horizontal">
	    <a href="#listview" data-transition="flip" data-role="button" data-icon-theme="a" data-iconpos="notext" data-icon="minus">left 1</a>
	    <a href="#gridview" data-transition="flip" data-role="button" data-icon-theme="a" data-iconpos="notext" data-icon="grid">left 2</a>
	  </div>
	  <img class="makeitsmall" src="../images/icon_extract.png" alt="ScheduleCMU" />
	  <div class="ui-btn-right" data-role="controlgroup" data-type="horizontal">
	    <a href="#browsePop" data-transition="pop" data-rel="dialog" data-role="button" data-icon-theme="a" data-iconpos="notext" data-icon="myapp-browse">right 1</a>
	    <a href="#eventPop" data-transition="pop" data-role="button" data-icon-theme="a" data-iconpos="notext" data-rel="dialog" data-icon="myapp-cal">right 2</a>
	  </div>
	</div>
	<div id="calview" data-role="content">
		<!-- To be populated with a fullCalendar object -->
	</div>
</div>

<!-- Browse Pop Up -->
<div data-role="page" data-overlay-theme="b" id="browsePop">
	<div data-role="header"><h2>Browse</h2></div>
	<div data-role="content">
		<form id="courseBrowserForm">
			<input type="text" placeholder='e.g. "15451", "Computer Science", or "Western Music History"'></input>
			<a href="" data-role="button" onclick="searchForCourseInCourseBrowser();">Search</a>
		</form>
		<ul id="courseBrowserBody" data-role="listview" data-split-icon="plus">
			<!-- To be populated with a listview of courses matching the query -->
		</ul>
	</div>
</div>

<!-- New Event Pop-Up -->
<div data-role="page" data-overlay-theme="b" id="eventPop">
	<div data-role="header"><h2>New Event</h2></div>
	<div data-role="content">
		<form id="eventForm" onSubmit="processEventForm();">
			<div data-role="fieldcontain">
				<label for="eventFormCourseNum">Course Number (5 digits)</label>
				<input type="text" id="eventFormCourseNum" placeholder="15451"</input>
			</div>
			<div data-role="fieldcontain">
				<label for="eventFormType">Event Type</label>
				<select id="eventFormType">
				 	<option value="officehours">Office Hours</option>
				  	<option value="reviewsession">Review Session</option>
				  	<option value="extralab">Extra Lab</option>
				  	<option value="other">Other</option>
				</select>
			</div>
			<div data-role="fieldcontain">
				<label for="eventFormTitle">Event Title</label>
				<input type="text" id="eventFormTitle" placeholder="Midterm 2 Review Session"</input>
			</div>
			<div data-role="fieldcontain">
				<label for="eventFormLocation">Event Location</label>
				<input type="text" id="eventFormLocation" placeholder="GHC 4102"</input>
			</div>
			<div data-role="fieldcontain">
				<label for="eventFormDate">Date</label>
				<input type="date" name="date" id="eventFormDate" value=""  />
			</div>
			<div data-role="fieldcontain">
				<label for="eventFormStartTime">Starts</label>
				<select id="eventFormStartTime">
				 	<option value="1000">10:00a</option>
				  	<option value="1030">10:30a</option>
				  	<option value="1130">11:30a</option>
				  	<option value="1200">12:00p</option>
				  	<option value="1230">12:30p</option>
				  	<option value="1300">1:00p</option>
				  	<option value="1330">1:30p</option>
				</select>
			</div>
			<div data-role="fieldcontain">
				<label for="eventFormEndTime">Ends</label>
				<select id="eventFormEndTime">
				 	<option value="1000">10:00a</option>
				  	<option value="1030">10:30a</option>
				  	<option value="1130">11:30a</option>
				  	<option value="1200">12:00p</option>
				  	<option value="1230">12:30p</option>
				  	<option value="1300">1:00p</option>
				  	<option value="1330">1:30p</option>
				</select>					
			</div>
			<div data-role="fieldcontain">
				<label for="eventFormAndrew">Your Andrew ID</label>
				<input type="text" id="eventFormAndrew" placeholder="acarnegie"</input>
			</div>
			<a data-role="button" onclick="processEventForm();" data-transition="pop" href="#eventlist">Submit</a>
		</form>
	</div>
</div>

<!-- Course Info Pop Up -->
<div data-role="page" data-overlay-theme="b" id="courseInfo">
	<div data-role="header"><h2>Info</h2></div>
	<div data-role="content" id="courseInfoBrowser">
	</div>
</div>

<script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
<script src="../scripts/fullcalendar.min.js"></script>
<script src="../scripts/spin.min.js"></script>
<script src="../scripts/schedule.js"></script>
<script src="../scripts/login.js"></script>
<script src="../scripts/mobile.js"></script>
</body>
</html>